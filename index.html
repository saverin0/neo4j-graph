<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Neo4j Public Graph Explorer</title>

  <!-- Neovis -->
  <script src="https://cdn.jsdelivr.net/npm/neovis.js@2.0.2/dist/neovis.js"></script>

  <style>
    html, body, #viz {
      width: 100%;
      height: 100%;
      margin: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
    }

    #info {
      position: fixed;
      top: 12px;
      left: 12px;
      background: rgba(255,255,255,0.95);
      padding: 10px 14px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      z-index: 999;
      max-width: 500px;
      font-size: 14px;
    }
  </style>
</head>

<body>

<div id="info">
  <b>Graph Explorer</b><br>
  Starting view: CircularValueChain • Partner • Deliverable<br>
  Click nodes to explore connected data
</div>

<div id="viz"></div>

<script>

console.log("DEPLOY FINAL VERSION");

const config = {

  containerId: "viz",

  neo4j: {
    serverUrl: "neo4j://6c04bbfb.databases.neo4j.io",
    serverUser: "neo4j",
    serverPassword: "PUT_YOUR_PASSWORD_HERE",

    driverConfig: {
      encrypted: "ENCRYPTION_ON",
      trust: "TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"
    }
  },

  /*
    CLEAN LANDING VIEW
    Shows only connected important nodes
  */

  initialCypher: `
    MATCH (n)-[r]-(m)
    WHERE (n:CircularValueChain OR n:Partner OR n:Deliverable)
      AND (m:CircularValueChain OR m:Partner OR m:Deliverable)
    RETURN n, r, m
    LIMIT 800
  `,

  /*
    Node labels captions
  */

  labels: {
    Partner: { caption: "partners_legalname" },
    Deliverable: { caption: "deliverables_name" },
    Phase: { caption: "phase_id" },
    Demonstration: { caption: "demonstrations" },
    CircularValueChain: { caption: "value_chains" },
    Innovation: { caption: "phase_id" }
  },

  relationships: {
    "*": {}
  },

  /*
    Visual layout tuning
  */

  visConfig: {

    nodes: {
      shape: "dot",
      size: 12,
      font: { size: 14 }
    },

    edges: {
      width: 2,
      smooth: false,
      arrows: { to: { enabled: true } }
    },

    physics: {
      enabled: true,
      stabilization: {
        iterations: 700
      }
    }
  }
};

const viz = new NeoVis.default(config);
viz.render();

</script>
</body>
</html>

